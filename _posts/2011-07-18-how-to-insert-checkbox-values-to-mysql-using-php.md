---
title: ریختن مقادیر چکباکس‌ها در دیتابیس با PHP و Mysql
author: فرهاد عیدی
layout: post
redirect_from: /51/
categories:
  - وب و طراحی
tags:
  - PHP
  - آموزش
  - برنامه‌نویسی
---
زبان تحت وب PHP‌ یکی از زبان‌های محبوب برنامه‌نویسی تحت وب می‌باشد که در چندسال گذشته به سرعت در میان برنامه‌نویسان رواج پیدا کرده است. زبانی که در عین سادگی در یادگیری، بسیار کامل می‌باشد. قصد توضیح درباره زبان PHP را ندارم و فرض را بر این میگذارم که خوانندگان این مطلب قبلا با PHP کار کرده‌اند. پس به سراغ اصل مطلب می‌رویم.

<img class="mt-image-center" style="text-align: center; display: block; margin: 0 auto 20px;" alt="how-to-insert-checkbox-values-to-mysql-using-php.jpg" src="/asset/legacy/how-to-insert-checkbox-values-to-mysql-using-php.jpg" width="550" height="220" />همانطور که می‌دانید یکی از مهمترین مولفه‌ها در طراحی و پردازش صفحات وب، قسمت فرم‌ها هستند که در همه‌ی وبسایت‌های استاتیک و داینامیک حداقل با یک نوع از آن سر و کار داریم. نمونه‌ی واضح آن را می‌توان در تمامی صفحاتی دانست که شما از طریق آنها برای وبلاگ یا وبسایتتان به تولید محتوا می‌پردازید. محیطی که شما در آن مطلب می‌نویسید و منتشر می‌کنید در واقع یک فرم است که پس از ورود اطلاعات توسط شما، به صفحه‌ی دیگری ارسال شده و پردازش می‌شود.

<div>
</div>

<!-- more -->

  
دریافت مقادیر فرم‌ها در PHP از طریق دستورهای زیر صورت می‌پذیرد:  
`$_POST['field_name']<br />
$_GET['field_name']<br />
$_REQUEST['field_name']`با استفاده از کد سطر اول، دستورات ارسالی با متد Post و سطر دوم مقادیر ارسالی با متد GET و سطر سوم مقادیر ارسالی توسط هر دو متد را دریافت می‌کند. با جستجوی عبارت &#8220;PHP Forms&#8221; در گوگل به راحتی می‌توانید به تمام منابع مورد نیاز برای یادگیری نحوه‌ی کار فرم‌ها دسترسی پیدا کنید.  
در این مطلب قصد من تکرار مکررات و آموزش دوباره‌ی نحوه‌ی کار فرم‌ها که چندین و چندبار در سایت‌های مختلف توضیح داده شده است، نیست و قرار است به آموزش قسمتی از فرم‌ها بپردازم که چه در وب فارسی و چه در سرتاسر وب، کمتر به آن پرداخته شده است یعنی نحوه‌ی دریافت چکباکس‌ها و ذخیره‌ی مقادیر آنها در یک پایگاه داده.  
فرض کنید فرمی با مشخصات زیر در یک صفحه‌ی HTML طراحی کرده‌ایم:  
`<form method="post" action=""><br />
<label>Your favorite websites</label><br />
<input type="checkbox" name="site[]" value="farxa" />Faroxa <br /><br />
<input type="checkbox" name="site[]" value="google" />Google <br /><br />
<input type="checkbox" name="site[]" value="bing" />Bing <br /><br />
<input type="checkbox" name="site[]" value="yahoo" />Yahoo <br /><br />
<input type="submit" value="SUbmit" /><br />
</form>`در کد بالا چهار جعبه‌ی انتخاب‌شو (Checkbox) طراحی کرده‌ایم و به کاربر حق انتخاب وبسایت‌های مورد علاقه‌اش را می‌دهیم. کاربر می‌تواند هر کدام را انتخاب کرده و در انتها روی دکمه ارسال کلیک کند. در زبان ASP به راحتی می‌توان مقادیر انتخاب شده را مانند سایر سایر انواع فرم‌ها دریافت کرده و در بانک اطلاعاتی ذخیره کرد اما در PHP در صورت انتخاب چند مقدار، فقط مقدار آخری در دیتابیس ذخیره خواهد شود. مثلا اگر ما گزینه‌های faroxa و Google و Bing را انتخاب کرده باشیم فقط آخرین مقدار یعنی Bing در دیتابیس ذخیره خواهد شد. دلیل این کار هم خاصیت آرایه‌ای مقادیر دریافتی حاصل از چکباکس‌ها است. برای حل این مشکل باید به شکل زیر عمل کنیم:  
`<?php<br />
$i=0;<br />
foreach($_POST['site'] as $arr=>$value)<br />
{<br />
$myArrays[$i]=$value;<br />
$i = $i+1;<br />
}<br />
?>`در خط اول یک متغیر به نام &#8220;i&#8221; معرفی کردیم و مقدار آن را برابر با صفر قرار دادیم چون مقدار آرایه‌ها همواره از صفر شروع می‌شود. در خط بعدی یک حلقه تعریف می‌کنیم و مقادیر دریافتی از فرم را به صورت آرایه دریافت می‌کند. در داخل حلقه نیز مقدارهای دریافتی را در داخل آرایه‌ی جدیدی به نام myArrays می‌ریزم و یک مقدار به مقدار &#8220;i&#8221; اضافه میکنیم که در اجرای بعدی، مقدار بعدی را در آرایه‌ی بعدی بریزد. هم‌اکنون آرایه‌ای از مقدارهای دریافت شده به صورت زیر در برنامه‌ی ما ذخیره شده است:  
`$myArrays = array(<br />
0 => 'faroxa',<br />
1 => 'google',<br />
2 => 'bing',<br />
);`اما مقادیر را نمی‌توان به همین صورت در داخل بانک اطلاعاتی Mysql ریخت و مجبوریم آنها را تبدیل به یک رشته کنیم و در یک متغیر که ما نام آنرا checked در نظر گرفتیم قرار دهیم.. برای این کار از کد زیر استفاده می‌کنیم:  
`$checked=implode(', ', $myArrays);`حالا خروجی ما به این شکل خواهد بود:  
`faroxa, google, bing`حالا به راحتی می‌توانیم مقادیر چکباکس را در داخل بانک اطلاعاتی قرار دهیم:  
`mysql_query("INSERT INTO myTable(favorites) VALUES('".$checked."') ");`حالا ما اطلاعات دریافتی حاصل از چکباکس‌ها را درون بانک اطلاعاتی داریم اما در هنگام فراخوانی آنها چگونه باید دوباره آن را به صورت آرایه فراخوانی کنیم؟  
پاسخ این سوال بسیار ساده است. در کدهای بالا از دستور Implode استفاده کردیم که آرایه‌ها را به صورت یک رشته برای ما تبدیل کرد. حالا کافی است از دستور Explode استفاده کنیم که دقیقا عکس کار Implode را انجام می‌دهد.  
ابتدا با تکه کد زیر رشته را از دیتابیس فراخوانی کرده و در متغیری به نام $string میریزیم:  
`$string=mysql_query("SELECT favorites FROM myTable ");`حالا با تکه کد زیر رشته‌ی $string را تکه تکه کرده و به داخل آرایه‌ای به نام $new_values می‌ریزیم:  
`$new_values=explode(", ", $string);`حالا دوباره تمام اطلاعات را به صورت آرایه خواهیم داشت.  
این آموزش سعی شده است که خلاصه‌وار به توضیح این مسئله بپردازد و ممکن است درک آن برای کسانی که هنوز با بانک اطلاعاتی و PHP کار نکرده باشند کمی سخت باشد.  
بعدها بیشتر درباره PHP خواهم نوشت.  
موفق و پیروز باشید.